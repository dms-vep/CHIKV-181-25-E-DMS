# --------------------------------------------------------------------------------------
# Define how to create summary plots across multiple assays.
# --------------------------------------------------------------------------------------

# define defaults shared across summaries
summary_default: &summary_default
  min_times_seen: 2  # only include mutations with times_seen >= this
  min_frac_models: 0.75  # only include mutations in >= this fraction of models (selections)
  alphabet: [A, C, D, E, F, G, H, I, K, L, M, N, P, Q, R, S, T, V, W, Y]  # amino acids to include
  init_floor_escape_at_zero: true  # initially floor site escape to be >= 0?
  init_site_escape_stat: sum  # initially show site escape as this statistic

cell_entry_default: &cell_entry_default
  stat: effect  # column to plot
  color_scheme: redblue
  max_at_least: 2
  fixed_min: -6
  init_min_value: null
  le_filters:
    effect_std: 2.25  # remove if std less than this

mxra8_binding_default: &mxra8_binding_default
  stat: Mxra8 binding_median  # column to plot
  color_scheme: purplegreen
  max_at_least: 2
  min_at_least: 2
  init_min_value: null
  le_filters:
    Mxra8 binding_std: 2.25

# Entry into three different cell lines and Mxra8 binding
entry_293T-Mxra8_C636_293T-TIM1_Mxra8-binding:
  <<: *summary_default
  antibody_escape: {}
  other_phenotypes:
    entry in 293T_Mxra8 cells:
      <<: *cell_entry_default
      csv: results/func_effects/averages/293T-Mxra8_entry_func_effects.csv
    entry in C636 cells:
      <<: *cell_entry_default
      csv: results/func_effects/averages/C636_entry_func_effects.csv
    entry in 293T_TIM1 cells:
      <<: *cell_entry_default
      csv: results/func_effects/averages/293T-TIM1_entry_func_effects.csv
    binding to mouse Mxra8:
      <<: *mxra8_binding_default
      csv: results/receptor_affinity/averages/mouse_Mxra8_mut_effect.csv

# binding to human versus mouse Mxra8
entry_mouse_human_Mxra8:
  <<: *summary_default
  antibody_escape: {}
  other_phenotypes:
    entry in 293T_Mxra8 cells:
      <<: *cell_entry_default
      init_min_value: -4
      csv: results/func_effects/averages/293T-Mxra8_entry_func_effects.csv
    binding to mouse Mxra8:
      <<: *mxra8_binding_default
      csv: results/receptor_affinity/averages/mouse_Mxra8_mut_effect.csv
    binding to human Mxra8:
      <<: *mxra8_binding_default
      csv: results/receptor_affinity/averages/human_Mxra8_mut_effect.csv
